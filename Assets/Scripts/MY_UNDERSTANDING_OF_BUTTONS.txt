================================================================================
MY UNDERSTANDING OF ALL BUTTONS - SUMMARY
================================================================================

Here's what I understand about each button and the complete flow:

================================================================================
BUTTON 1: SUBMIT BUTTON (Patient Input Panel)
================================================================================
WHAT IT DOES:
✓ Saves Patient ID to PlayerPrefs (remembers it)
✓ Hides the Patient Input Panel
✓ Triggers data loading from API (if Patient ID exists)

WHAT IT DOES NOT DO:
✗ Does NOT send data to API
✗ Does NOT connect device
✗ Does NOT generate data

WHEN IT RUNS: When user enters Patient ID and clicks Submit

================================================================================
BUTTON 2: SKIP BUTTON (Patient Input Panel - Optional)
================================================================================
WHAT IT DOES:
✓ Hides the Patient Input Panel
✓ Uses saved Patient ID (or "DEFAULT_PATIENT" if none)

WHAT IT DOES NOT DO:
✗ Does NOT save Patient ID
✗ Does NOT send data to API
✗ Does NOT connect device

WHEN IT RUNS: When user clicks Skip (uses default/saved ID)

================================================================================
BUTTON 3: CONNECT DEVICE BUTTON ⭐ MOST IMPORTANT ⭐
================================================================================
WHAT IT DOES:
✓ Connects the device (shows "Connected!")
✓ Starts generating random data EVERY 2 SECONDS
✓ Sends data to API automatically
✓ Updates dashboard metrics (Pulse, Movement, Sleep)
✓ Updates joint angles (Knee, Elbow, Shoulder, Hip)
✓ Updates graph with new data points
✓ Continues until you click "Disconnect"

WHAT IT DOES NOT DO:
✗ Does NOT require Patient ID (but uses it if available)

WHEN IT RUNS: 
- First click: Connects and starts data generation
- Second click: Disconnects and stops data generation

THIS IS THE BUTTON THAT MAKES EVERYTHING WORK!

================================================================================
BUTTON 4: REFRESH BUTTON
================================================================================
WHAT IT DOES:
✓ Reloads data from API (if Patient ID exists)
✓ OR generates new mock data (if no Patient ID)
✓ Updates all UI elements
✓ Updates graph

WHAT IT DOES NOT DO:
✗ Does NOT send new data to API
✗ Does NOT start automatic data generation
✗ Does NOT connect/disconnect device

WHEN IT RUNS: When user clicks Refresh (manual refresh)

================================================================================
BUTTON 5: EXPORT REPORT BUTTON
================================================================================
WHAT IT DOES:
✓ Logs current data to Console (for debugging)
✓ Shows message that feature is not implemented

WHAT IT DOES NOT DO:
✗ Does NOT send data to API
✗ Does NOT export a file
✗ Does NOT do anything useful yet (placeholder)

WHEN IT RUNS: When user clicks Export Report (does nothing useful)

================================================================================
COMPLETE FLOW - STEP BY STEP
================================================================================

STEP 1: App Starts
------------------
→ Patient Input Panel shows (if no saved Patient ID)
→ OR Dashboard shows directly (if Patient ID saved)

STEP 2: Enter Patient ID (Optional)
------------------------------------
→ User enters Patient ID
→ Clicks "Submit" → Saves ID, hides panel
→ OR clicks "Skip" → Uses default ID, hides panel
→ System tries to load existing data from API

STEP 3: Connect Device ⭐ THIS IS THE KEY STEP ⭐
-------------------------------------------------
→ User clicks "Connect Device" button
→ Button shows "Connecting..." then "Connected!"
→ Data generation starts automatically
→ Every 2 seconds:
  * New random data is generated
  * Data is sent to API (may fail, but data still generates)
  * Dashboard UI updates
  * Graph updates with new data point

STEP 4: View Data
-----------------
→ Metrics cards show: Pulse, Movement, Sleep
→ Joint angles show: Knee, Elbow, Shoulder, Hip  
→ Graph shows line chart with data
→ Data updates in real-time every 2 seconds

STEP 5: Disconnect (Optional)
------------------------------
→ User clicks "Disconnect" button
→ Data generation stops
→ Button changes back to "Connect Device"

================================================================================
WHY API MIGHT BE FAILING
================================================================================

The API is failing because:
1. Wrong URL - pointing to Google Drive file instead of Web App
2. API not deployed - Google Apps Script not deployed as Web App
3. API code issue - doPost() function doesn't handle "addPatient" action

BUT: Data still generates locally even if API fails!
The graph should still work even if API fails!

================================================================================
WHY GRAPH MIGHT NOT BE SHOWING
================================================================================

Possible reasons:
1. "Connect Device" button not clicked
2. Not enough time passed (need at least 2-4 seconds)
3. "Toggle All" is OFF (need at least one toggle ON)
4. GraphContainer not set up correctly
5. LineGraphRenderer component missing or not assigned

================================================================================
QUICK FIX CHECKLIST
================================================================================

To see the graph:
□ Click "Connect Device" button
□ Wait 4-6 seconds
□ Make sure "Toggle All" is ON
□ Check Console for "Graph data points" messages
□ Check Console for "UpdateGraph called" messages
□ Check Console for "Added Pulse/Movement/Sleep line" messages

To fix API (optional - graph works without API):
□ Get correct Web App URL from Google Apps Script
□ Update URL in Unity Inspector (PatientDataAPI component)
□ Make sure API is deployed as Web App
□ Make sure "Who has access" is "Anyone"

================================================================================
IMPORTANT NOTES
================================================================================

1. "Connect Device" button is THE MOST IMPORTANT button
   - Without it, nothing happens
   - It starts data generation
   - It updates the graph

2. API failure does NOT stop the graph
   - Data generates locally
   - Graph updates locally
   - API is just for saving data to server

3. Graph needs data to show
   - Click "Connect Device"
   - Wait a few seconds
   - Data accumulates over time

4. Toggles control what shows on graph
   - "Toggle All" = shows all lines
   - Individual toggles = show specific lines
   - At least one must be ON

================================================================================
END OF SUMMARY
================================================================================


